<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Help & Support - CureVerse</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/modern.css') }}"
    />
    <style>
      /* Missing sidebar styles */
      .tagline {
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.9rem;
        margin: 0;
        font-weight: 300;
      }

      .sidebar-footer {
        padding: 24px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        z-index: 1;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
      }

      .user-details {
        color: white;
      }

      .user-name {
        font-weight: 600;
        font-size: 0.9rem;
      }

      .user-status {
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.7);
      }

      .logout-btn {
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.2rem;
        transition: color 0.3s ease;
        text-decoration: none;
      }

      .logout-btn:hover {
        color: #e74c3c;
      }

      /* Fix main content layout and scrolling */
      .main-content {
        overflow-y: auto !important;
        overflow-x: hidden !important;
        height: calc(90vh - 40px) !important;
        padding: 2rem;
        padding-bottom: 4rem !important;
        box-sizing: border-box;
        position: relative;
        scrollbar-width: thin;
        scrollbar-color: #2d5016 #f1f1f1;
      }

      /* Webkit scrollbar styling */
      .main-content::-webkit-scrollbar {
        width: 8px;
      }

      .main-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }

      .main-content::-webkit-scrollbar-thumb {
        background: #2d5016;
        border-radius: 4px;
      }

      .main-content::-webkit-scrollbar-thumb:hover {
        background: #1a2f0d;
      }

      /* Ensure the app container allows proper scrolling */
      .app-container {
        height: 90vh !important;
        overflow: hidden !important;
      }

      /* Center the header content */
      .content-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .content-header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 1rem;
      }

      .content-header p {
        font-size: 1.1rem;
        color: #666;
        max-width: 600px;
        margin: 0 auto;
      }

      .help-container {
        max-width: 1000px;
        margin: 0 auto;
      }

      .help-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
      }

      .help-card {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
      }

      .help-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .help-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #2d5016, #4a7c59);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        color: white;
        font-size: 2rem;
      }

      .help-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #2d5016;
        margin-bottom: 1rem;
      }

      .help-description {
        color: #666;
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .help-action {
        background: linear-gradient(135deg, #2d5016, #4a7c59);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .help-action:hover {
        transform: translateY(-2px);
      }

      .faq-section {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
      }

      .faq-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2d5016;
        margin-bottom: 2rem;
        text-align: center;
      }

      .faq-item {
        border-bottom: 1px solid #f0f0f0;
        margin-bottom: 1rem;
      }

      .faq-question {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
        cursor: pointer;
        font-weight: 500;
        color: #333;
      }

      .faq-question:hover {
        color: #2d5016;
      }

      .faq-answer {
        padding: 0 0 1rem 0;
        color: #666;
        line-height: 1.6;
        display: none;
      }

      .faq-answer.active {
        display: block;
      }

      .faq-icon {
        transition: transform 0.3s ease;
      }

      .faq-item.active .faq-icon {
        transform: rotate(180deg);
      }

      .contact-form {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .form-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2d5016;
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-label {
        display: block;
        font-weight: 500;
        color: #333;
        margin-bottom: 0.5rem;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
      }

      .form-textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        border-color: #2d5016;
      }

      .submit-btn {
        background: linear-gradient(135deg, #2d5016, #4a7c59);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        width: 100%;
        transition: transform 0.2s ease;
      }

      .submit-btn:hover {
        transform: translateY(-2px);
      }

      .contact-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
      }

      .contact-item {
        text-align: center;
        padding: 1.5rem;
        background: #f8f9fa;
        border-radius: 12px;
      }

      .contact-item i {
        font-size: 2rem;
        color: #2d5016;
        margin-bottom: 1rem;
      }

      .contact-item h4 {
        color: #2d5016;
        margin-bottom: 0.5rem;
      }

      .contact-item p {
        color: #666;
        margin: 0;
      }

      /* Help & Support Responsive Styles */
      @media (max-width: 768px) {
        .main-content {
          height: calc(100vh - 70px) !important;
          padding: 1rem;
        }

        .help-container {
          max-width: 100%;
        }

        .help-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
          margin-bottom: 2rem;
        }

        .help-card {
          padding: 1.5rem;
        }
      }

      @media (max-width: 480px) {
        .main-content {
          height: calc(100vh - 60px) !important;
          padding: 0.5rem;
        }

        .content-header {
          margin-bottom: 1.5rem;
        }

        .content-header h1 {
          font-size: 1.8rem;
        }

        .help-grid {
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        .help-card {
          padding: 1rem;
        }

        .help-card h3 {
          font-size: 1.1rem;
        }

        .faq-item {
          padding: 1rem;
        }

        .contact-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo">
            <img
              src="{{ url_for('static', filename='img/logo.svg') }}"
              alt="CureVerse"
            />
            <h1>CureVerse</h1>
          </div>
          <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
          </button>
          <p class="tagline">Your AI Health Assistant</p>
        </div>

        <nav class="sidebar-menu">
          <div class="menu-section">
            <h3 class="menu-title">AI ASSISTANT</h3>
            <ul class="menu-items">
              <li class="menu-item">
                <a href="/" class="menu-link">
                  <i class="fas fa-robot"></i>
                  <span>AI Chatbot</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="menu-section">
            <h3 class="menu-title">AYURVEDIC TOOLS</h3>
            <ul class="menu-items">
              <li class="menu-item">
                <a href="/dosha-analysis" class="menu-link">
                  <i class="fas fa-balance-scale"></i>
                  <span>Dosha Analysis</span>
                </a>
              </li>
              <li class="menu-item">
                <a href="/seasonal-wellness" class="menu-link">
                  <i class="fas fa-leaf"></i>
                  <span>Seasonal Wellness</span>
                </a>
              </li>
              <li class="menu-item">
                <a href="/remedy-library" class="menu-link">
                  <i class="fas fa-mortar-pestle"></i>
                  <span>Remedy Library</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="menu-section">
            <h3 class="menu-title">RESOURCES</h3>
            <ul class="menu-items">
              <li class="menu-item">
                <a href="/health-library" class="menu-link">
                  <i class="fas fa-book-medical"></i>
                  <span>Health Library</span>
                </a>
              </li>
              <li class="menu-item">
                <a href="/find-doctor" class="menu-link">
                  <i class="fas fa-user-md"></i>
                  <span>Find a Doctor</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="menu-section">
            <h3 class="menu-title">SETTINGS</h3>
            <ul class="menu-items">
              <li class="menu-item">
                <a href="#" class="menu-link" onclick="clearChatHistory()">
                  <i class="fas fa-trash-alt"></i>
                  <span>Clear Chat History</span>
                </a>
              </li>
              <li class="menu-item">
                <a href="/preferences" class="menu-link">
                  <i class="fas fa-cog"></i>
                  <span>Preferences</span>
                </a>
              </li>
              <li class="menu-item">
                <a href="/help-support" class="menu-link active">
                  <i class="fas fa-question-circle"></i>
                  <span>Help & Support</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <div class="sidebar-footer">
          <div class="user-info">
            <div class="user-avatar">
              <i class="fas fa-user"></i>
            </div>
            <div class="user-details">
              <div class="user-name">{{ user_name }}</div>
              <div class="user-status">Premium Member</div>
            </div>
          </div>
          <a href="/logout" class="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
          </a>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="content-header">
          <h1>Help & Support</h1>
          <p>Get the help you need to make the most of CureVerse</p>
        </div>

        <div class="help-container">
          <!-- Quick Help Options -->
          <div class="help-grid">
            <div class="help-card" onclick="scrollToFAQ()">
              <div class="help-icon">
                <i class="fas fa-question-circle"></i>
              </div>
              <h3 class="help-title">Frequently Asked Questions</h3>
              <p class="help-description">
                Find quick answers to common questions about CureVerse features
                and Ayurvedic practices.
              </p>
              <button class="help-action">View FAQ</button>
            </div>

            <div class="help-card" onclick="scrollToContact()">
              <div class="help-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <h3 class="help-title">Contact Support</h3>
              <p class="help-description">
                Can't find what you're looking for? Send us a message and we'll
                get back to you within 24 hours.
              </p>
              <button class="help-action">Contact Us</button>
            </div>

            <div class="help-card" onclick="openUserGuide()">
              <div class="help-icon">
                <i class="fas fa-book"></i>
              </div>
              <h3 class="help-title">User Guide</h3>
              <p class="help-description">
                Learn how to use all CureVerse features with our comprehensive
                step-by-step guide.
              </p>
              <button class="help-action">Open Guide</button>
            </div>
          </div>

          <!-- FAQ Section -->
          <div class="faq-section" id="faqSection">
            <h2 class="faq-title">Frequently Asked Questions</h2>

            <div class="faq-item">
              <div class="faq-question" onclick="toggleFAQ(this)">
                <span>What is Ayurveda and how does CureVerse use it?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </div>
              <div class="faq-answer">
                Ayurveda is a 5,000-year-old system of natural healing from
                India. CureVerse combines traditional Ayurvedic wisdom with
                modern AI technology to provide personalized health
                recommendations based on your unique constitution (dosha) and
                current health needs.
              </div>
            </div>

            <div class="faq-item">
              <div class="faq-question" onclick="toggleFAQ(this)">
                <span>How accurate are the health recommendations?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </div>
              <div class="faq-answer">
                Our AI is trained on authentic Ayurvedic texts and modern
                research. However, our recommendations are for educational
                purposes only and should not replace professional medical
                advice. Always consult with healthcare providers for serious
                health concerns.
              </div>
            </div>

            <div class="faq-item">
              <div class="faq-question" onclick="toggleFAQ(this)">
                <span>What is a dosha analysis?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </div>
              <div class="faq-answer">
                A dosha analysis determines your unique Ayurvedic constitution
                based on the three doshas: Vata (air/space), Pitta (fire/water),
                and Kapha (earth/water). Understanding your dosha helps
                personalize diet, lifestyle, and wellness recommendations.
              </div>
            </div>

            <div class="faq-item">
              <div class="faq-question" onclick="toggleFAQ(this)">
                <span>Is my health data secure?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </div>
              <div class="faq-answer">
                Yes, we take your privacy seriously. All health data is
                encrypted and stored securely. We never share your personal
                information with third parties without your explicit consent.
                You can review our privacy policy for more details.
              </div>
            </div>

            <div class="faq-item">
              <div class="faq-question" onclick="toggleFAQ(this)">
                <span
                  >Can I use CureVerse alongside conventional medicine?</span
                >
                <i class="fas fa-chevron-down faq-icon"></i>
              </div>
              <div class="faq-answer">
                Absolutely! Ayurveda can complement conventional medicine.
                However, always inform your healthcare providers about any herbs
                or supplements you're taking, and never stop prescribed
                medications without consulting your doctor.
              </div>
            </div>
          </div>

          <!-- Contact Form -->
          <div class="contact-form" id="contactSection">
            <h2 class="form-title">Contact Support</h2>

            <form id="supportForm" onsubmit="submitSupportForm(event)">
              <div class="form-group">
                <label class="form-label">Subject</label>
                <select class="form-select" id="subject" required>
                  <option value="">Select a topic</option>
                  <option value="technical">Technical Issue</option>
                  <option value="account">Account Problem</option>
                  <option value="billing">Billing Question</option>
                  <option value="feature">Feature Request</option>
                  <option value="general">General Inquiry</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  class="form-input"
                  id="email"
                  placeholder="your.email@example.com"
                  required
                />
              </div>

              <div class="form-group">
                <label class="form-label">Message</label>
                <textarea
                  class="form-textarea"
                  id="message"
                  placeholder="Describe your issue or question in detail..."
                  required
                ></textarea>
              </div>

              <button type="submit" class="submit-btn">
                <i class="fas fa-paper-plane"></i>
                Send Message
              </button>
            </form>

            <div class="contact-info">
              <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <h4>Email Support</h4>
                <p>support@cureverse.com</p>
              </div>

              <div class="contact-item">
                <i class="fas fa-clock"></i>
                <h4>Response Time</h4>
                <p>Within 24 hours</p>
              </div>

              <div class="contact-item">
                <i class="fas fa-globe"></i>
                <h4>Available</h4>
                <p>24/7 Online Support</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom spacer to ensure content is fully visible -->
        <div style="height: 100px"></div>
      </div>
    </div>

    <script>
      function scrollToFAQ() {
        document
          .getElementById("faqSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function scrollToContact() {
        document
          .getElementById("contactSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function openUserGuide() {
        alert(
          "User guide would open here. This could be a PDF download or a separate page."
        );
      }

      function toggleFAQ(element) {
        const faqItem = element.parentElement;
        const answer = faqItem.querySelector(".faq-answer");

        // Close all other FAQ items
        document.querySelectorAll(".faq-item").forEach(item => {
          if (item !== faqItem) {
            item.classList.remove("active");
            item.querySelector(".faq-answer").classList.remove("active");
          }
        });

        // Toggle current FAQ item
        faqItem.classList.toggle("active");
        answer.classList.toggle("active");
      }

      function submitSupportForm(event) {
        event.preventDefault();

        const formData = {
          subject: document.getElementById("subject").value,
          email: document.getElementById("email").value,
          message: document.getElementById("message").value,
        };

        // Here you would send the form data to your backend
        console.log("Support form submitted:", formData);

        alert(
          "Thank you for contacting us! We'll get back to you within 24 hours."
        );

        // Reset form
        document.getElementById("supportForm").reset();
      }

      function clearChatHistory() {
        if (confirm("Are you sure you want to clear your chat history?")) {
          fetch("/api/user/clear-chat-history", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
          })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                alert("Chat history cleared successfully!");
              } else {
                alert("Failed to clear chat history.");
              }
            });
        }
      }

      function toggleMobileMenu() {
        const menu = document.querySelector(".sidebar-menu");
        menu.classList.toggle("mobile-open");
      }
    </script>
  </body>
</html>
